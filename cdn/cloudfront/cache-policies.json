{
  "cache_policies": [
    {
      "name": "LegalAI-API-ReadOperations",
      "comment": "Cache policy for read-only API operations with authentication awareness",
      "default_ttl": 300,
      "min_ttl": 60,
      "max_ttl": 3600,
      "parameters_in_cache_key_and_forwarded_to_origin": {
        "enable_accept_encoding_gzip": true,
        "enable_accept_encoding_brotli": true,
        "headers_config": {
          "header_behavior": "whitelist",
          "headers": {
            "quantity": 2,
            "items": [
              "Authorization",
              "X-API-Version"
            ]
          }
        },
        "cookies_config": {
          "cookie_behavior": "none"
        },
        "query_strings_config": {
          "query_string_behavior": "whitelist",
          "query_strings": {
            "quantity": 3,
            "items": [
              "page",
              "limit",
              "format"
            ]
          }
        }
      }
    },
    {
      "name": "LegalAI-StaticAssets-Versioned",
      "comment": "Long-term caching for versioned static assets (CSS, JS with hash)",
      "default_ttl": 31536000,
      "min_ttl": 31536000,
      "max_ttl": 31536000,
      "parameters_in_cache_key_and_forwarded_to_origin": {
        "enable_accept_encoding_gzip": true,
        "enable_accept_encoding_brotli": true,
        "headers_config": {
          "header_behavior": "none"
        },
        "cookies_config": {
          "cookie_behavior": "none"
        },
        "query_strings_config": {
          "query_string_behavior": "whitelist",
          "query_strings": {
            "quantity": 1,
            "items": ["v"]
          }
        }
      }
    },
    {
      "name": "LegalAI-Images-Optimized",
      "comment": "Cache policy for images with quality/size parameters",
      "default_ttl": 2592000,
      "min_ttl": 86400,
      "max_ttl": 31536000,
      "parameters_in_cache_key_and_forwarded_to_origin": {
        "enable_accept_encoding_gzip": false,
        "enable_accept_encoding_brotli": false,
        "headers_config": {
          "header_behavior": "whitelist",
          "headers": {
            "quantity": 1,
            "items": ["Accept"]
          }
        },
        "cookies_config": {
          "cookie_behavior": "none"
        },
        "query_strings_config": {
          "query_string_behavior": "whitelist",
          "query_strings": {
            "quantity": 3,
            "items": [
              "size",
              "quality",
              "format"
            ]
          }
        }
      }
    },
    {
      "name": "LegalAI-Fonts",
      "comment": "Maximum caching for web fonts",
      "default_ttl": 31536000,
      "min_ttl": 31536000,
      "max_ttl": 31536000,
      "parameters_in_cache_key_and_forwarded_to_origin": {
        "enable_accept_encoding_gzip": false,
        "enable_accept_encoding_brotli": false,
        "headers_config": {
          "header_behavior": "none"
        },
        "cookies_config": {
          "cookie_behavior": "none"
        },
        "query_strings_config": {
          "query_string_behavior": "none"
        }
      }
    }
  ],
  "response_headers_policies": [
    {
      "name": "LegalAI-SecurityHeaders",
      "comment": "Security headers for all responses",
      "security_headers_config": {
        "strict_transport_security": {
          "override": true,
          "access_control_max_age_sec": 31536000,
          "include_subdomains": true,
          "preload": true
        },
        "content_type_options": {
          "override": true
        },
        "frame_options": {
          "override": true,
          "frame_option": "SAMEORIGIN"
        },
        "xss_protection": {
          "override": true,
          "mode_block": true,
          "protection": true
        },
        "referrer_policy": {
          "override": true,
          "referrer_policy": "strict-origin-when-cross-origin"
        },
        "content_security_policy": {
          "override": true,
          "content_security_policy": "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.legal-ai.example.com;"
        }
      },
      "custom_headers_config": {
        "quantity": 2,
        "items": [
          {
            "header": "X-Powered-By",
            "value": "Legal AI System",
            "override": true
          },
          {
            "header": "X-CDN-Cache-Status",
            "value": "CloudFront",
            "override": false
          }
        ]
      },
      "cors_config": {
        "access_control_allow_origins": {
          "quantity": 2,
          "items": [
            "https://legal-ai.example.com",
            "https://app.legal-ai.example.com"
          ]
        },
        "access_control_allow_headers": {
          "quantity": 5,
          "items": [
            "Authorization",
            "Content-Type",
            "X-API-Version",
            "X-Request-ID",
            "Accept"
          ]
        },
        "access_control_allow_methods": {
          "quantity": 5,
          "items": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ]
        },
        "access_control_allow_credentials": true,
        "access_control_max_age_sec": 600,
        "origin_override": true
      }
    },
    {
      "name": "LegalAI-FontHeaders",
      "comment": "CORS headers for font files",
      "cors_config": {
        "access_control_allow_origins": {
          "quantity": 1,
          "items": ["*"]
        },
        "access_control_allow_headers": {
          "quantity": 1,
          "items": ["*"]
        },
        "access_control_allow_methods": {
          "quantity": 2,
          "items": ["GET", "HEAD"]
        },
        "access_control_allow_credentials": false,
        "origin_override": true
      },
      "custom_headers_config": {
        "quantity": 1,
        "items": [
          {
            "header": "Cache-Control",
            "value": "public, max-age=31536000, immutable",
            "override": true
          }
        ]
      }
    }
  ]
}
